apiVersion: v1
kind: ConfigMap
metadata:
  name: payment-service-config
  namespace: default
data:
  application.yaml: |
    server:
      port: 8080
      tomcat:
        max-threads: 200
        min-spare-threads: 10
        connection-timeout: 20000
        keep-alive-timeout: 20000
    
    spring:
      datasource:
        hikari:
          maximum-pool-size: 20
          minimum-idle: 5
          connection-timeout: 10000
          idle-timeout: 300000
          max-lifetime: 600000
          leak-detection-threshold: 60000
      
      redis:
        timeout: 2000ms
        lettuce:
          pool:
            max-active: 16
            max-idle: 8
            min-idle: 2
            max-wait: 1000ms
    
    payment:
      processor:
        timeout: 5000
        retry:
          max-attempts: 3
          delay: 1000
        circuit-breaker:
          failure-threshold: 5
          timeout: 10000
          reset-timeout: 30000
      
      external-apis:
        bank-gateway:
          url: https://api.bank-gateway.com
          timeout: 8000
          max-connections: 50
          connection-pool-timeout: 5000
        
        fraud-detection:
          url: https://api.fraud-detection.com
          timeout: 3000
          max-connections: 20
          connection-pool-timeout: 2000
    
    logging:
      level:
        com.payment: INFO
        org.springframework: WARN
        root: INFO
    
    management:
      endpoints:
        web:
          exposure:
            include: health,metrics,prometheus
      metrics:
        export:
          prometheus:
            enabled: true