apiVersion: v1
kind: ConfigMap
metadata:
  name: payment-service-config
  namespace: default
data:
  application.yaml: |
    server:
      port: 8080
      tomcat:
        threads:
          max: 200
          min-spare: 10
        connection-timeout: 20000
        keep-alive-timeout: 60000
    
    spring:
      datasource:
        hikari:
          maximum-pool-size: 20
          minimum-idle: 5
          connection-timeout: 30000
          idle-timeout: 600000
          max-lifetime: 1800000
      
    payment:
      processor:
        timeout: 30000
        retry:
          max-attempts: 3
          delay: 1000
        connection-pool:
          max-connections: 50
          connection-timeout: 10000
          read-timeout: 15000
      
      cache:
        enabled: true
        ttl: 300
        max-size: 1000
      
      circuit-breaker:
        failure-threshold: 5
        recovery-timeout: 60000
        enabled: true
    
    logging:
      level:
        com.bear.payment: INFO
        org.springframework: WARN
        root: WARN
    
    management:
      endpoints:
        web:
          exposure:
            include: health,metrics,prometheus
      metrics:
        export:
          prometheus:
            enabled: true