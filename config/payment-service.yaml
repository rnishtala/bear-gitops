# Bear GitOps Payment Service Configuration
# 
# This file controls the behavior of the payment service.
# The connection_pool_size directly affects latency:
#   - < 10: Severe latency (2-5 seconds) - simulates pool exhaustion
#   - 10-24: Moderate latency (0.5-1.5 seconds) - degraded performance
#   - >= 25: Normal operation (10-50ms) - healthy

# Database configuration
database:
  connection_pool_size: 25  # Increased from 5 to handle peak payment load
  max_connections: 50
  min_connections: 5  # Reduced from 10 to match recommendation
  connection_timeout_ms: 10000  # Increased from 5000 for better stability
  idle_timeout_ms: 300000
  max_lifetime_ms: 1800000
  query_timeout_ms: 30000  # Maintained at 30000 as recommended
  retry_attempts: 3
  retry_delay_ms: 1000

# Service configuration
service:
  timeout_ms: 25000
  version: "1.0.9"
  max_concurrent_requests: 100

# Payment provider configuration
payment_provider:
  timeout_ms: 45000  # Increased from 30000 to prevent premature failures
  retry_attempts: 3
  retry_delay_ms: 2000
  connection_timeout_ms: 10000  # Maintained at 10000 as recommended
  circuit_breaker:
    failure_threshold: 5
    recovery_timeout_ms: 30000
    half_open_max_calls: 3

# Monitoring and logging
monitoring:
  metrics_enabled: true
  tracing_enabled: true
  log_level: "INFO"
  slow_query_threshold_ms: 1000
  performance_monitoring:
    enabled: true
    alert_threshold_ms: 2000

# Cache configuration
cache:
  enabled: true
  ttl_seconds: 300
  max_size: 10000
  eviction_policy: "LRU"

# Error handling
error_handling:
  timeout_message: "Payment processing timeout - please try again"
  generic_error_message: "Payment processing temporarily unavailable"
  detailed_logging: true
  alert_on_errors: true

# Payment processing configuration
payment_processing:
  async_timeout_ms: 60000  # Added async timeout for payment processing