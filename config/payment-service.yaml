apiVersion: v1
kind: ConfigMap
metadata:
  name: payment-service-config
  namespace: default
data:
  # Database configuration
  database:
    connection_pool:
      max_connections: 20
      min_connections: 5
      connection_timeout: 10s
      idle_timeout: 300s
      max_lifetime: 3600s
    query_timeout: 30s
    retry_attempts: 3
    retry_delay: 1s
  
  # Payment provider configuration
  payment_provider:
    timeout: 30s
    retry_attempts: 3
    retry_delay: 2s
    circuit_breaker:
      failure_threshold: 5
      recovery_timeout: 60s
      half_open_max_calls: 3
    rate_limit:
      requests_per_second: 100
      burst_size: 20
  
  # Service performance settings
  service:
    request_timeout: 45s
    max_concurrent_requests: 50
    graceful_shutdown_timeout: 30s
    health_check_interval: 10s
  
  # Resource limits
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi
  
  # Monitoring and logging
  monitoring:
    metrics_enabled: true
    tracing_enabled: true
    log_level: "INFO"
    slow_query_threshold: 1s
    performance_monitoring:
      enabled: true
      alert_threshold: 2s
  
  # Cache configuration
  cache:
    enabled: true
    ttl: 300s
    max_size: 10000
    eviction_policy: "LRU"
  
  # Error handling
  error_handling:
    timeout_message: "Payment processing timeout - please try again"
    generic_error_message: "Payment processing temporarily unavailable"
    detailed_logging: true
    alert_on_errors: true