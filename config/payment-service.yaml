apiVersion: v1
kind: ConfigMap
metadata:
  name: payment-service-config
  namespace: default
data:
  # Database connection settings - optimized for low latency
  database:
    host: "payment-db.default.svc.cluster.local"
    port: "5432"
    name: "payments"
    max_connections: "50"
    connection_timeout: "5s"
    idle_timeout: "300s"
    max_lifetime: "1800s"
    
  # Connection pool settings for better performance
  connection_pool:
    initial_size: "10"
    max_size: "30"
    min_idle: "5"
    acquire_timeout: "3s"
    validation_timeout: "1s"
    
  # HTTP client timeouts - reduced for lower latency
  http_client:
    connect_timeout: "2s"
    read_timeout: "10s"
    write_timeout: "5s"
    idle_timeout: "60s"
    max_idle_connections: "100"
    max_connections_per_host: "10"
    
  # Circuit breaker configuration
  circuit_breaker:
    failure_threshold: "5"
    recovery_timeout: "30s"
    success_threshold: "3"
    timeout: "5s"
    
  # Caching configuration for improved response times
  cache:
    enabled: "true"
    ttl: "300s"
    max_size: "1000"
    type: "redis"
    redis_url: "redis://redis.default.svc.cluster.local:6379"
    
  # Logging and monitoring
  logging:
    level: "info"
    format: "json"
    
  # Performance tuning
  performance:
    worker_threads: "8"
    max_request_size: "1MB"
    request_queue_size: "1000"
    enable_compression: "true"
    
  # Health check configuration
  health:
    check_interval: "10s"
    timeout: "2s"